<ng-container *ngIf="!isApplicationReview">
  <p-confirmDialog
    *appHasRole="['HR_ADMIN', 'HR', 'RECRUITER']"
    [style]="{ minWidth: '450px' }"
    [draggable]="false"
    [rejectVisible]="true"
    acceptLabel="{{ 'YES' | translate }}"
    rejectLabel="{{ 'NO' | translate }}"
    acceptIcon="pi pi-check"
    rejectIcon="pi pi-times"
    acceptButtonStyleClass="p-button-danger"
    rejectButtonStyleClass="p-button-text"
  >
    <ng-template pTemplate="header">
      <div class="flex items-center gap-2">
        <i class="pi pi-exclamation-triangle text-yellow-500"></i>
        <span class="font-medium text-text!">{{
          "DELETE_EDUCATION" | translate
        }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="message">
      <div class="flex items-center gap-2">
        <i class="pi pi-info-circle text-blue-500"></i>
        <span class="text-text!">{{
          "ARE_YOU_SURE_YOU_WANT_TO_DELETE_THIS_EDUCATION" | translate
        }}</span>
      </div>
    </ng-template>
  </p-confirmDialog>
</ng-container>

<div
  class="bg-slate-50 mt-2 dark:bg-slate-700/50 border-l-4 border-blue-500 pl-4 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all duration-300 rounded-lg p-4"
>
  <!-- Card Header: Fixed menu button on right, content on left -->
  <div class="flex justify-between items-start gap-4">
    <!-- Content Area: Title, Subtitle, Date - Takes remaining space -->
    <div class="flex-1 min-w-0">
      <h4
        class="text-base sm:text-lg font-medium text-slate-800 dark:text-slate-100 break-words"
      >
        {{ education.degree }}
      </h4>
      <p
        class="text-sm sm:text-base text-slate-600 dark:text-slate-300 break-words"
      >
        {{ education.institution }}
      </p>
      <span
        class="inline-block mt-2 text-xs sm:text-sm text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 sm:px-3 py-1 rounded-full border border-slate-200 dark:border-slate-600 whitespace-nowrap"
      >
        <i class="pi pi-calendar text-blue-500 mr-1"></i>
        {{ formatDateSafely(education.startDate, "N/A") }} -
        {{
          education.current
            ? ("PRESENT" | translate)
            : formatDateSafely(education.endDate, "N/A")
        }}
      </span>
    </div>

    <!-- Menu Button Area: Fixed position, top right -->
    <ng-container *ngIf="isEditAllowed">
      <div class="flex-shrink-0" *ngIf="!isApplicationReview">
        <p-menu
          #menu
          *appHasRole="['HR_ADMIN', 'HR', 'RECRUITER']"
          [popup]="true"
          [model]="menuItems"
          appendTo="body"
        ></p-menu>
        <button
          *appHasRole="['HR_ADMIN', 'HR', 'RECRUITER']"
          pButton
          icon="pi pi-ellipsis-v"
          class="p-button-rounded p-button-text p-button-sm dark:text-slate-200"
          (click)="menu.toggle($event)"
        ></button>
      </div>
    </ng-container>
  </div>

  <!-- Card Body: Additional content below header -->
  <p
    class="text-sm sm:text-base text-slate-600 dark:text-slate-300 mt-3 break-words"
  >
    {{ education.field }}
  </p>
  <p class="text-xs sm:text-sm text-slate-500 dark:text-slate-400 mt-2">
    <i class="pi pi-map-marker text-blue-500 mr-1"></i>
    {{ education.location }}
  </p>
</div>
