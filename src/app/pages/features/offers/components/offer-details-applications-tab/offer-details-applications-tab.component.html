<div class="pt-4 flex flex-col gap-4">
  <ng-container *appHasRole="['HR']">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <!-- Company Applications Tab Card -->
      <button
        (click)="activeTab = 'company_applications'"
        [class]="
          activeTab === 'company_applications'
            ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300 shadow-md'
            : 'bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-600'
        "
        class="p-6 border-2 rounded-xl transition-all duration-200 cursor-pointer text-left group"
      >
        <div class="flex items-center gap-4">
          <div
            [class]="
              activeTab === 'company_applications'
                ? 'bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-400'
                : 'bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 group-hover:bg-blue-100 dark:group-hover:bg-blue-800 group-hover:text-blue-600 dark:group-hover:text-blue-400'
            "
            class="w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-200"
          >
            <i class="pi pi-users text-xl"></i>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold text-lg mb-1">
              {{ "COMPANY_APPLICATIONS" | translate }}
            </h3>
            <p class="text-sm opacity-75">
              {{ "COMPANY_APPLICATIONS_DESCRIPTION" | translate }}
            </p>
          </div>
          <div
            [class]="
              activeTab === 'company_applications'
                ? 'text-blue-500 dark:text-blue-400'
                : 'text-gray-400 dark:text-gray-500 group-hover:text-blue-500 dark:group-hover:text-blue-400'
            "
            class="transition-colors duration-200"
          >
            <i class="pi pi-chevron-right text-lg"></i>
          </div>
        </div>
      </button>

      <!-- Job Sourcing Suggestions Tab Card -->
      <button
        (click)="
          activeTab = 'jobSourcing_suggestions'; loadClientPushedApplications()
        "
        [class]="
          activeTab === 'jobSourcing_suggestions'
            ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300 shadow-md'
            : 'bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-600'
        "
        class="p-6 border-2 rounded-xl transition-all duration-200 cursor-pointer text-left group"
      >
        <div class="flex items-center gap-4">
          <div
            [class]="
              activeTab === 'jobSourcing_suggestions'
                ? 'bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-400'
                : 'bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 group-hover:bg-blue-100 dark:group-hover:bg-blue-800 group-hover:text-blue-600 dark:group-hover:text-blue-400'
            "
            class="w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-200"
          >
            <i class="pi pi-sparkles text-xl"></i>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold text-lg mb-1">
              {{ "JOB_SOURCING_SUGGESTIONS" | translate }}
            </h3>
            <p class="text-sm opacity-75">
              {{ "JOB_SOURCING_SUGGESTIONS_DESCRIPTION" | translate }}
            </p>
          </div>
          <div
            [class]="
              activeTab === 'jobSourcing_suggestions'
                ? 'text-blue-500 dark:text-blue-400'
                : 'text-gray-400 dark:text-gray-500 group-hover:text-blue-500 dark:group-hover:text-blue-400'
            "
            class="transition-colors duration-200"
          >
            <i class="pi pi-chevron-right text-lg"></i>
          </div>
        </div>
      </button>
    </div>
    <ng-container *ngIf="activeTab === 'company_applications'">
      <app-applications-filter-form [request]="request" />
      <app-offer-details-applications-tab-table [request]="request" />
    </ng-container>
    <ng-container *ngIf="activeTab === 'jobSourcing_suggestions'">
      <!-- Loading State -->
      <div
        *ngIf="applicationService.isApplicationsLoading()"
        class="flex items-center justify-center py-12"
      >
        <div class="flex items-center gap-3">
          <i class="pi pi-spinner pi-spin text-blue-600 text-2xl"></i>
          <p class="text-gray-600 dark:text-gray-400">
            {{ "LOADING_CLIENT_PUSHED_APPLICATIONS" | translate }}
          </p>
        </div>
      </div>

      <!-- No Applications State -->
      <div
        *ngIf="
          !applicationService.isApplicationsLoading() &&
          applicationService.applications().data?.length === 0
        "
        class="text-center py-12"
      >
        <div
          class="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4"
        >
          <i class="pi pi-send text-2xl text-gray-400"></i>
        </div>
        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">
          {{ "NO_APPLICATION_SUGGESTIONS_FOUND" | translate }}
        </h3>
        <p class="text-gray-600 dark:text-gray-400">
          {{ "NO_APPLICATION_SUGGESTIONS_YET" | translate }}
        </p>
      </div>

      <!-- Applications Grid -->
      <div
        *ngIf="
          applicationService.applications().data &&
          applicationService.applications().data.length > 0
        "
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
      >
        <div
          *ngFor="
            let application of applicationService.applications().data;
            trackBy: trackByApplicationId
          "
          class="application-card bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-all duration-300"
        >
          <!-- Application Header -->
          <div class="flex items-start justify-between mb-3">
            <div class="flex-1">
              <div class="mb-2">
                <h4 class="text-sm text-gray-900 dark:text-white">
                  <span class="font-medium text-gray-700 dark:text-gray-300"
                    >{{ "PROFILE_TITLE" | translate }}:</span
                  >
                  <span class="font-semibold ml-1">{{
                    application.profile.profileTitle || ("NO_TITLE" | translate)
                  }}</span>
                </h4>
              </div>
            </div>

            <!-- Status Badge -->
            <div [class]="getApplicationStatusClasses(application.status)">
              {{
                getApplicationStatusDisplayText(application.status) | translate
              }}
            </div>
          </div>

          <!-- Application Details -->
          <div class="space-y-3">
            <!-- Profile Category -->
            <div *ngIf="application.profile?.category">
              <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                {{ "CATEGORY" | translate }}
              </p>
              <div class="flex items-center gap-2 text-sm">
                <i class="pi pi-tag text-gray-400 dark:text-gray-500"></i>
                <span
                  class="bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-md text-xs font-medium"
                >
                  {{ application.profile.category | translate }}
                </span>
              </div>
            </div>
          </div>

          <!-- Application Actions -->
          <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
            <div class="flex items-center justify-end">
              <button
                class="text-blue-600 hover:text-blue-700 cursor-pointer! dark:text-blue-400 dark:hover:text-blue-500 text-sm font-medium flex items-center gap-1"
                (click)="viewApplicationDetails(application)"
              >
                <i class="pi pi-eye text-xs"></i>
                {{ "VIEW_DETAILS" | translate }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </ng-container>
  <ng-container *appHasRole="['RECRUITER', 'HR_ADMIN']">
    <app-applications-filter-form [request]="request" />
    <app-offer-details-applications-tab-table [request]="request" />
  </ng-container>
</div>
<app-add-edit-interview-schedule-dialog />
