<ng-container *appHasRole="['HR']">
  <div
    *ngIf="isStaffListLoading()"
    class="fixed inset-0 bg-black/50 w-full flex items-center justify-center z-50"
  >
    <div class="p-4 rounded-lg">
      <div class="flex items-center gap-2">
        <i class="pi pi-spin pi-spinner text-primary text-6xl!"></i>
      </div>
    </div>
  </div>
</ng-container>

<div class="flex h-[calc(100vh-200px)] w-full">
  <app-company-details-members-tab-staff-list
    [ngClass]="{
      'w-1/4 min-w-2xs': !isStaffListCollapsed(),
      'w-0': isStaffListCollapsed()
    }"
    class="transition-all duration-300 overflow-hidden"
  ></app-company-details-members-tab-staff-list>

  <div class="flex-1 flex flex-col min-w-0">
    <!-- Header with Staff Name and Add Button -->
    <div
      class="p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"
    >
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <button
            type="button"
            (click)="toggleStaffList()"
            class="px-3 py-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
            [title]="
              isStaffListCollapsed()
                ? ('SHOW_STAFF_LIST' | translate)
                : ('HIDE_STAFF_LIST' | translate)
            "
          >
            <i
              class="pi"
              [ngClass]="{
                'pi-chevron-right': isStaffListCollapsed(),
                'pi-chevron-left': !isStaffListCollapsed()
              }"
            ></i>
          </button>
          <h2
            class="text-lg font-semibold text-gray-900 dark:text-gray-100 truncate"
          >
            {{ selectedStaff()?.firstName }} {{ selectedStaff()?.lastName }}
          </h2>
        </div>
        <button
          type="button"
          (click)="showAddStaffDialog()"
          class="inline-flex items-center cursor-pointer text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors whitespace-nowrap"
        >
          <i class="pi pi-plus mr-1.5"></i>
          {{ "ADD_MEMBER" | translate }}
        </button>
      </div>
    </div>

    <app-company-details-members-tab-staff-assignments
      class="flex-1 h-full w-full"
    ></app-company-details-members-tab-staff-assignments>
  </div>
</div>

<app-add-edit-company-staff-dialog></app-add-edit-company-staff-dialog>
<app-staff-details-dialog></app-staff-details-dialog>
